<Window x:Class="SecurityDatabaseAnalyzer.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="Security Database Analyzer"
        Height="720"
        Width="1200"
        WindowStartupLocation="CenterScreen">

    <DockPanel Margin="12">

        <!-- ===================== TOP BAR ===================== -->
        <Border DockPanel.Dock="Top"
                Padding="10"
                Background="#F3F3F3"
                BorderBrush="#DDDDDD"
                BorderThickness="0,0,0,1">
            <DockPanel>

                <Button Content="Open Database"
                        Width="140"
                        Height="34"
                        Margin="0,0,16,0"
                        Click="OpenDatabase_Click" />

                <TextBlock x:Name="StatusTextBlock"
                           Text="No database loaded"
                           VerticalAlignment="Center"
                           Foreground="#555555" />
            </DockPanel>
        </Border>

        <!-- ===================== MAIN CONTENT ===================== -->
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="3*" />
                <ColumnDefinition Width="2*" />
            </Grid.ColumnDefinitions>

            <!-- ===================== LEFT: USERS + LOGIN EVENTS ===================== -->
            <StackPanel Grid.Column="0">

                <!-- USERS TABLE -->
                <Border Padding="10"
                        Margin="0,0,8,8"
                        BorderBrush="#DDDDDD"
                        BorderThickness="1"
                        CornerRadius="6">

                    <DockPanel>
                        <TextBlock Text="USERS"
                                   FontSize="16"
                                   FontWeight="Bold"
                                   Margin="0,0,0,10" />

                        <DataGrid x:Name="UsersDataGrid"
                                  AutoGenerateColumns="False"
                                  IsReadOnly="True"
                                  CanUserAddRows="False"
                                  HeadersVisibility="Column"
                                  GridLinesVisibility="Horizontal"
                                  RowBackground="#FAFAFA"
                                  AlternatingRowBackground="#F1F1F1">

                            <DataGrid.Columns>
                                <DataGridTextColumn Header="Username"
                                                    Binding="{Binding Username}"
                                                    Width="*" />

                                <DataGridTextColumn Header="Failed Attempts"
                                                    Binding="{Binding FailedAttempts}"
                                                    Width="150" />

                                <DataGridCheckBoxColumn Header="Locked"
                                                        Binding="{Binding Locked}"
                                                        Width="80" />

                                <DataGridTextColumn Header="Created At"
                                                    Binding="{Binding CreatedAt}"
                                                    Width="160" />
                            </DataGrid.Columns>
                        </DataGrid>
                    </DockPanel>
                </Border>

                <!-- LOGIN EVENTS TABLE -->
                <Border Padding="10"
                        Margin="0,0,8,0"
                        BorderBrush="#DDDDDD"
                        BorderThickness="1"
                        CornerRadius="6">

                    <DockPanel>
                        <TextBlock Text="LOGIN EVENTS"
                                   FontSize="16"
                                   FontWeight="Bold"
                                   Margin="0,0,0,10" />

                        <DataGrid x:Name="LoginEventsDataGrid"
                                  AutoGenerateColumns="False"
                                  IsReadOnly="True"
                                  CanUserAddRows="False"
                                  HeadersVisibility="Column"
                                  GridLinesVisibility="Horizontal"
                                  RowBackground="#FAFAFA"
                                  AlternatingRowBackground="#F1F1F1">

                            <DataGrid.Columns>
                                <DataGridTextColumn Header="Username"
                                                    Binding="{Binding Username}"
                                                    Width="*" />

                                <DataGridCheckBoxColumn Header="Success"
                                                        Binding="{Binding Success}"
                                                        Width="80" />

                                <DataGridTextColumn Header="Mode"
                                                    Binding="{Binding Mode}"
                                                    Width="100" />

                                <DataGridTextColumn Header="Reason"
                                                    Binding="{Binding Reason}"
                                                    Width="220" />

                                <DataGridTextColumn Header="Timestamp"
                                                    Binding="{Binding OccurredAt}"
                                                    Width="180" />
                            </DataGrid.Columns>
                        </DataGrid>
                    </DockPanel>
                </Border>

            </StackPanel>

            <!-- ===================== RIGHT: SECURITY INSIGHTS ===================== -->
            <Border Grid.Column="1"
                    Padding="10"
                    Margin="8,0,0,0"
                    BorderBrush="#DDDDDD"
                    BorderThickness="1"
                    CornerRadius="6">

                <StackPanel>
                    <TextBlock Text="SECURITY INSIGHTS"
                               FontSize="16"
                               FontWeight="Bold"
                               Margin="0,0,0,12" />

                    <TextBlock x:Name="TotalUsersText"
                               Text="Total users: —"
                               Margin="0,4" />

                    <TextBlock x:Name="LockedUsersText"
                               Text="Locked users: —"
                               Margin="0,4" />

                    <TextBlock x:Name="HighRiskUsersText"
                               Text="High-risk users: —"
                               Margin="0,4" />

                    <Separator Margin="0,12" />

                    <TextBlock Text="Notes:"
                               FontWeight="Bold"
                               Margin="0,0,0,4" />

                    <TextBlock Text="• Locked accounts may indicate brute-force attempts."
                               TextWrapping="Wrap"
                               Opacity="0.85" />

                    <TextBlock Text="• Demo-mode logins may indicate SQL injection testing."
                               TextWrapping="Wrap"
                               Opacity="0.85"
                               Margin="0,4,0,0" />
                </StackPanel>
            </Border>

        </Grid>

    </DockPanel>
</Window>
